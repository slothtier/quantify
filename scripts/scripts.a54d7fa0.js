"use strict";angular.module("quantifyApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngRoute","quantifyApp.controllers"]).run(["$rootScope","$location",function(a,b){b.$$hash.search(/([A-Za-z0-9_-]{155})/gi)>-1&&(a.location=b.$$hash,b.path("/quantify/main"),b.url(b.path()))}]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/quantify/main",{templateUrl:"quantify/views/main.html",controller:"QuantifyCtrl"}).when("/auth",{templateUrl:"quantify/views/auth.html",controller:"AuthCtrl"}).otherwise({redirectTo:"/auth"}),b.html5Mode(!0)}]),angular.module("quantifyApp.controllers",[]).controller("QuantifyCtrl",["$scope",function(){}]).controller("AuthCtrl",["$scope",function(a){a.authenticate=function(){window.location.href="https://accounts.spotify.com/authorize?client_id=2877dc4791af41e0b53de799f8cf2472&redirect_uri=http%3A%2F%2Fslothtier.github.io%2Fquantify%2Findex.html&scope=playlist-read-private&response_type=token&state=123",console.log("clicked the auth button")}}]).controller("DataCtrl",function(a,b,c){a.getPlaylistData=function(){var d=c.location.match(/([A-Za-z0-9_-]{155})/gi)[0];if(b({method:"POST",url:"https://accounts.spotify.com/api/token",headers:{Authorization:"Basic Mjg3N2RjNDc5MWFmNDFlMGI1M2RlNzk5ZjhjZjI0NzI6MTUzOWEzY2ZjMzRmNGRlYmI5YjRkODA2Y2JmMDNmN2U=",grant_type:"client_credentials","Access-Control-Allow-Origin":"*"}}).success(function(b){a.tokenData=b}).error(function(){}),void 0===a.model||null===a.model||-1===a.model.url.search(/[\w]{22}/gi))window.alert("please enter a valid spotify playlist url or uri");else{var e=a.model.url.match(/([A-Za-z0-9_]{8,40})/gi)[0],f=a.model.url.substr(a.model.url.search(/[\w]{22}/gi),22),g="https://api.spotify.com/v1/users/"+e+"/playlists/"+f+"/tracks",h="Bearer "+d;b({method:"GET",url:g,headers:{Authorization:h}}).success(function(b){a.playlistName=b.name,a.playlistTrackcount=b.total,a.playlistItems=b.items,a.tracks=[],a.tracks2=[],a.range=[],angular.forEach(b.items,function(b){a.tracks2.push(b),angular.forEach(a.tracks2.track,function(b){a.tracks.push(b)})});for(var c=0;c<Object.keys(a.tracks2).length;c++)a.range.push(a.tracks2[c].track);for(var d=0,e=0;e<Object.keys(a.tracks2).length;e++)d+=a.range[e].duration_ms,console.log(d);a.total=d,a.durationinmin=d/1e3/60,a.totalduration=Math.ceil(a.durationinmin),console.log(a.tracks2),console.log(a.range),console.log(a.total),console.log(a.tracks2[0]),console.log(a.model.url),console.log(Object.keys(a.tracks2).length),console.log(Object.keys(a.tracks2).keys),a.testtest=a.tracks2,a.log=[],angular.forEach(a.testtest,function(b,c){a.log.push(c+": "+b),console.log(a.log)});var f=0,g=0,h=0;f=Math.ceil(60*a.durationinmin*12/1e3),a.sizeNormalQuality=f,g=Math.ceil(60*a.durationinmin*20/1e3),a.sizeHighQuality=g,h=Math.ceil(60*a.durationinmin*40/1e3),a.sizeExtremeQuality=h,console.log(a.sizeNormalQuality),console.log(a.sizeHighQuality),console.log(a.sizeExtremeQuality),a.showPlaylist=!0}).error(function(){window.alert("playlist data could not be loaded")})}}}).controller("UrlCtrl",["$scope",function(a){a.url=a.model.url}]);